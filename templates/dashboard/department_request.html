{% extends "base.html" %}

{% block title %}Demande de Département{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="px-4 py-6 sm:px-0">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
                <i class="fas fa-building mr-3"></i>
                Demande de Département
            </h1>
            <a href="{{ url_for('dashboard.dashboard') }}" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Retour au Dashboard
            </a>
        </div>

        <!-- Instructions -->
        <div class="bg-blue-50 dark:bg-blue-900 rounded-lg p-4 mb-6">
            <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2">
                <i class="fas fa-info-circle mr-2"></i>
                Comment postuler ?
            </h3>
            <ul class="text-sm text-blue-800 dark:text-blue-200 space-y-1">
                <li>• Choisissez le département qui vous intéresse</li>
                <li>• Sélectionnez le rôle auquel vous souhaitez postuler</li>
                <li>• Rédigez une lettre de motivation expliquant votre intérêt</li>
                <li>• Votre demande sera examinée par l'administration</li>
            </ul>
        </div>

        <div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg border p-6">
            <form method="POST" class="space-y-6">
                <div>
                    <label for="department_id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Département *
                    </label>
                    <select name="department_id" id="department_id" required
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                        <option value="">Sélectionnez un département</option>
                        {% for department in departments %}
                        <option value="{{ department.id }}">{{ department.nom }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="role_requested" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Rôle Demandé *
                    </label>
                    <select name="role_requested" id="role_requested" required
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                        <option value="">Sélectionnez un rôle</option>
                        <option value="ouvrier">Ouvrier</option>
                        <option value="chef">Chef</option>
                        <option value="chantres">Chantre</option>
                        <option value="intercesseurs">Intercesseur</option>
                        <option value="régis">Régisseur</option>
                        <option value="chef_chantres">Chef Chantres</option>
                        <option value="chef_intercesseurs">Chef Intercesseurs</option>
                        <option value="chef_régis">Chef Régisseurs</option>
                    </select>
                </div>

                <div>
                    <label for="motivation" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Lettre de motivation *
                    </label>
                    <textarea name="motivation" id="motivation" rows="6" required
                              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                              placeholder="Expliquez pourquoi vous souhaitez rejoindre ce département et occuper ce rôle..."></textarea>
                </div>

                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                    <h3 class="text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2">
                        <i class="fas fa-info-circle mr-2"></i>
                        Informations importantes
                    </h3>
                    <ul class="text-sm text-blue-700 dark:text-blue-300 space-y-1">
                        <li>• Votre demande sera examinée par l'administrateur</li>
                        <li>• Vous recevrez une notification du statut de votre demande</li>
                        <li>• Assurez-vous de bien motiver votre demande</li>
                        <li>• Vous ne pouvez avoir qu'une demande en attente à la fois</li>
                    </ul>
                </div>

                <div class="flex justify-end space-x-4">
                    <a href="{{ url_for('department_requests.my_department_requests') }}" 
                       class="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        <i class="fas fa-list mr-2"></i>
                        Mes Candidatures
                    </a>
                    <a href="{{ url_for('dashboard.dashboard') }}" class="px-6 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors">
                        Annuler
                    </a>
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors">
                        <i class="fas fa-paper-plane mr-2"></i>
                        Soumettre
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}